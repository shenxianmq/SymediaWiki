# 链接同步同步原理详解

## 一、STRM 的目的

通过生成 strm 文件，减少刮削过程中对网盘的操作，从而达到减少风控的目的

![](https://images.symedia.top/2025/04/08/20250408102208_01fdfd17.png)

## 二、SyMedie 的链接同步

- 主链路：网盘视频（网盘） **生成** strm 文件（本地）
- 副链路：生成 strm 文件的同时，将媒体库源文件/字幕等 周边文件，同步到 strm 所在的文件夹

![](https://images.symedia.top/2025/04/08/20250408102206_0633ed45.png)

## 三、字段说明：

| **分类**      | **字段**     | **说明**                                       | **备注**                        |
| ------------- | :----------- | :--------------------------------------------- | ------------------------------- |
| 路径          | 媒体目录     | 视频路径                                       |                                 |
|               | 链接目录     | STRM 路径                                      |                                 |
| 同步模式      | 同步模式     | 目录树（推荐）                                 | 小白请选目录树                  |
|               | 云盘文件名   | 如字段名                                       | 举例：一般是 115/115open        |
|               | 云盘根目录   | docker 挂载云盘的路径                          | 举例：                          |
|               | 同步屏蔽词   | 如字段名                                       |                                 |
| 副流程        | strm 后缀    | 需要转链的文件名后缀                           | 不填写则为不打开 strm 转链      |
|               | strm 模式    | local/cloud，自己选择                          | local 可读性强；cloud 支持 emby |
|               | 软链接后缀   | 需要转链的文件名后缀                           | 不填写则不打开                  |
| 链接拼接<br/> | 挂载类型     | cd2/alist/自定义                               | 小白选 cd2                      |
|               | 云端地址     | cd2/alist：ip+端口，需要带 http(s)             | 小白填 cd2ip+端口号             |
|               | 云端地址后缀 | 可自动生成                                     | 挂载类型+云端地址，自动生成     |
|               | 指定删除前缀 | 删除 cloud 链接多余的部分，保证 cloud 链接正确 | **坑比较大**                    |

## 四、小白配置教程

小白理解上面的原理之后，优先看视频解决

## 五、一些坑：

5.1 指定删除前缀：保留 115 开头的部分

|            | **内容**                                                                                                                                                                                                              | **备注**                                       |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 错误的链接 | [http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//CloudNAS/media/115open/](http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//CloudNAS/media/115open/)影音库（自动归档）/test.mkv | 根据你的配置情况                               |
| 删除前缀   | /CloudNAS/media                                                                                                                                                                                                       |                                                |
| 正确的链接 | [http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//115open/](http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//115open/)影音库（自动归档）/test.mkv                               | cd2 后台，下载此目录下文件，可以验证链接正确性 |
