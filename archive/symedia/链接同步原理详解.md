# 链接同步同步原理详解

## 一、STRM 的目的

通过生成 strm 文件，减少刮削过程中对网盘的操作，从而达到减少风控的目的

![](https://cdn.nlark.com/yuque/0/2025/png/8384795/1743694662280-203d79df-e597-48c9-82ef-98933b4fd2c5.png)

## 二、SyMedie 的链接同步

- 主链路：网盘视频（网盘） **生成** strm 文件（本地）
- 副链路：生成 strm 文件的同时，将媒体库源文件/字幕等 周边文件，同步到 strm 所在的文件夹

![](https://cdn.nlark.com/yuque/0/2025/png/8384795/1743695328589-45de83e4-8c54-4aba-a3c5-eaa8aa6e5c3b.png)

## 三、字段说明：

| **分类**      | **<font style="color:rgb(0, 0, 0);">字段</font>**     | **<font style="color:rgb(0, 0, 0);">说明</font>**                                       | **<font style="color:rgb(0, 0, 0);">备注</font>**                        |
| ------------- | :---------------------------------------------------- | :-------------------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| 路径          | <font style="color:rgb(0, 0, 0);">媒体目录</font>     | <font style="color:rgb(0, 0, 0);">视频路径</font>                                       |                                                                          |
|               | <font style="color:rgb(0, 0, 0);">链接目录</font>     | <font style="color:rgb(0, 0, 0);">STRM 路径</font>                                      |                                                                          |
| 同步模式      | <font style="color:rgb(0, 0, 0);">同步模式</font>     | <font style="color:rgb(0, 0, 0);">目录树（推荐）</font>                                 | <font style="color:rgb(0, 0, 0);">小白请选目录树</font>                  |
|               | <font style="color:rgb(0, 0, 0);">云盘文件名</font>   | <font style="color:rgb(0, 0, 0);">如字段名</font>                                       | <font style="color:rgb(0, 0, 0);">举例：一般是 115/115open</font>        |
|               | <font style="color:rgb(0, 0, 0);">云盘根目录</font>   | <font style="color:rgb(0, 0, 0);">docker 挂载云盘的路径</font>                          | <font style="color:rgb(0, 0, 0);">举例：</font>                          |
|               | <font style="color:rgb(0, 0, 0);">同步屏蔽词</font>   | <font style="color:rgb(0, 0, 0);">如字段名</font>                                       |                                                                          |
| 副流程        | <font style="color:rgb(0, 0, 0);">strm 后缀</font>    | <font style="color:rgb(0, 0, 0);">需要转链的文件名后缀</font>                           | <font style="color:rgb(0, 0, 0);">不填写则为不打开 strm 转链</font>      |
|               | <font style="color:rgb(0, 0, 0);">strm 模式</font>    | <font style="color:rgb(0, 0, 0);">local/cloud，自己选择</font>                          | <font style="color:rgb(0, 0, 0);">local 可读性强；cloud 支持 emby</font> |
|               | <font style="color:rgb(0, 0, 0);">软链接后缀</font>   | <font style="color:rgb(0, 0, 0);">需要转链的文件名后缀</font>                           | <font style="color:rgb(0, 0, 0);">不填写则不打开</font>                  |
| 链接拼接<br/> | <font style="color:rgb(0, 0, 0);">挂载类型</font>     | <font style="color:rgb(0, 0, 0);">cd2/alist/自定义</font>                               | 小白选 cd2                                                               |
|               | <font style="color:rgb(0, 0, 0);">云端地址</font>     | <font style="color:rgb(0, 0, 0);">cd2/alist：ip+端口，需要带 http(s)</font>             | 小白填 cd2ip+端口号                                                      |
|               | <font style="color:rgb(0, 0, 0);">云端地址后缀</font> | <font style="color:rgb(0, 0, 0);">可自动生成</font>                                     | <font style="color:rgb(0, 0, 0);">挂载类型+云端地址，自动生成</font>     |
|               | <font style="color:rgb(0, 0, 0);">指定删除前缀</font> | <font style="color:rgb(0, 0, 0);">删除 cloud 链接多余的部分，保证 cloud 链接正确</font> | **<font style="color:#DF2A3F;">坑比较大</font>**                         |

## 四、小白配置教程

小白理解上面的原理之后，优先看视频解决

## 五、一些坑：

5.1 指定删除前缀：保留 115 开头的部分

|            | **内容**                                                                                                                                                                                                              | **备注**                                       |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 错误的链接 | [http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//CloudNAS/media/115open/](http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//CloudNAS/media/115open/)影音库（自动归档）/test.mkv | 根据你的配置情况                               |
| 删除前缀   | /CloudNAS/media                                                                                                                                                                                                       |                                                |
| 正确的链接 | [http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//115open/](http://192.168.53.100:19798/static/http/192.168.53.100:19798/False//115open/)影音库（自动归档）/test.mkv                               | cd2 后台，下载此目录下文件，可以验证链接正确性 |
